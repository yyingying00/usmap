<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="usmap">
<title>4. Example Analysis • usmap</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="4. Example Analysis">
<meta property="og:description" content="usmap">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">usmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.3.9999</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">1. Introduction</a>
    <a class="dropdown-item" href="../articles/mapping.html">2. Mapping the US</a>
    <a class="dropdown-item" href="../articles/advanced-mapping.html">3. Advanced Mapping</a>
    <a class="dropdown-item" href="../articles/example_analysis.html">4. Example Analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pdil/usmap/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>4. Example Analysis</h1>
                        <h4 data-toc-skip class="author">Yingying
Yu</h4>
            
            <h4 data-toc-skip class="date">2023-12-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pdil/usmap/blob/HEAD/vignettes/example_analysis.Rmd" class="external-link"><code>vignettes/example_analysis.Rmd</code></a></small>
      <div class="d-none name"><code>example_analysis.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="diving-into-us-tornado-data">Diving into US Tornado Data<a class="anchor" aria-label="anchor" href="#diving-into-us-tornado-data"></a>
</h2>
<p>This page is created for an exercise for the BSPH course Statistical
Programming Paradigms and Workflows (140.777), and it demonstrates some
of the functions in the package with example data from TidyTuesday.
Codes are revisited from Evan Gower’s post on <a href="https://www.kaggle.com/code/evangower/diving-into-us-tornado-data/notebook" class="external-link">Kaggle</a>.</p>
<p>In this analysis, I am trying to understand how many tornadoes
happened through the years from 1950 to 2021? Where do tornadoes usually
occur? What are the fatalities caused by tornadoes by states? The source
data comes from NOAA’s National Weather Service Storm Prediction Center
<a href="https://www.spc.noaa.gov/wcm/#data" class="external-link">Severe Weather Maps,
Graphics, and Data Page</a>, The data dictionary can be found <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2023/2023-05-16/readme.md" class="external-link">here</a>.</p>
<div class="section level3">
<h3 id="load-the-data">0. Load the data<a class="anchor" aria-label="anchor" href="#load-the-data"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; here() starts at /Users/michelleyu/Desktop/JHU/Statistical Programming Paradigms and Workflows/Project3/usmap</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.4</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.4.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.0</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.2</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"tuesdata_drugs.rda"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">tuesdata</span> <span class="op">&lt;-</span> <span class="fu">tidytuesdayR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tidytuesdayR/man/tt_load.html" class="external-link">tt_load</a></span><span class="op">(</span><span class="st">"2023-05-16"</span><span class="op">)</span></span>
<span>    <span class="va">tornados</span> <span class="op">&lt;-</span> <span class="va">tuesdata</span><span class="op">$</span><span class="va">tornados</span></span>
<span></span>
<span>    <span class="co"># save the files to rda objects</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">tornados</span>, file <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"tuesdata_tornados.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; --- Compiling #TidyTuesday Information for 2023-05-16 ----</span></span>
<span><span class="co">#&gt; --- There is 1 file available ---</span></span>
<span><span class="co">#&gt; --- Starting Download ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Downloading file 1 of 1: `tornados.csv`</span></span>
<span><span class="co">#&gt; --- Download complete ---</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"tuesdata_tornados.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">tornados</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 68,693</span></span>
<span><span class="co">#&gt; Columns: 27</span></span>
<span><span class="co">#&gt; $ om           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 192, 193, 195, 196, 197, 194, 198, 199, 200, 201, 4, 5, 6…</span></span>
<span><span class="co">#&gt; $ yr           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1950, 1950, 1950, 1950, 1950, 1950, 1950, 1950, 1950, 195…</span></span>
<span><span class="co">#&gt; $ mo           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10, 10, 11, 11, 11, 11, 12, 12, 12, 12, 1, 1, 1, 1, 1, 1,…</span></span>
<span><span class="co">#&gt; $ dy           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 9, 20, 20, 20, 4, 2, 2, 2, 2, 13, 25, 25, 26, 3, 3, 3,…</span></span>
<span><span class="co">#&gt; $ date         <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 1950-10-01, 1950-10-09, 1950-11-20, 1950-11-20, 1950-11-…</span></span>
<span><span class="co">#&gt; $ time         <span style="color: #949494; font-style: italic;">&lt;time&gt;</span> 21:00:00, 02:15:00, 02:20:00, 04:00:00, 07:30:00, 17:00:…</span></span>
<span><span class="co">#&gt; $ tz           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "America/Chicago", "America/Chicago", "America/Chicago", …</span></span>
<span><span class="co">#&gt; $ datetime_utc <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span> 1950-10-02 03:00:00, 1950-10-09 08:15:00, 1950-11-20 08:…</span></span>
<span><span class="co">#&gt; $ st           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "OK", "NC", "KY", "KY", "MS", "PA", "IL", "IL", "AR", "IL…</span></span>
<span><span class="co">#&gt; $ stf          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 40, 37, 21, 21, 28, 42, 17, 17, 5, 17, 5, 29, 17, 48, 29,…</span></span>
<span><span class="co">#&gt; $ mag          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 3, 2, 1, 1, 3, 2, 3, 3, 1, 3, 2, 2, 2, 3, 3, 1, 2, 3, …</span></span>
<span><span class="co">#&gt; $ inj          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0, 3, 0, 0, 3, 1, 3, 25, 0, 0, 1, 5, 0, 2, 3, 3, 1, 0, 12…</span></span>
<span><span class="co">#&gt; $ fat          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, …</span></span>
<span><span class="co">#&gt; $ loss         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 5e+04, 5e+05, 5e+05, 5e+05, 5e+04, 5e+05, 5e+04, 5e+06, 5…</span></span>
<span><span class="co">#&gt; $ slat         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 36.73, 34.17, 37.37, 38.20, 32.42, 40.20, 38.97, 38.75, 3…</span></span>
<span><span class="co">#&gt; $ slon         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -102.52, -78.60, -87.20, -84.50, -89.13, -76.12, -90.05, …</span></span>
<span><span class="co">#&gt; $ elat         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 36.88, 0.00, 0.00, 0.00, 0.00, 40.40, 39.07, 38.90, 36.18…</span></span>
<span><span class="co">#&gt; $ elon         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -102.30, 0.00, 0.00, 0.00, 0.00, -75.93, -89.72, -89.38, …</span></span>
<span><span class="co">#&gt; $ len          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 15.8, 2.0, 0.1, 0.1, 2.0, 15.9, 18.8, 18.0, 7.8, 9.6, 0.6…</span></span>
<span><span class="co">#&gt; $ wid          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 10, 880, 10, 10, 37, 100, 50, 200, 10, 50, 17, 300, 100, …</span></span>
<span><span class="co">#&gt; $ ns           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ sn           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, …</span></span>
<span><span class="co">#&gt; $ f1           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 25, 47, 177, 209, 101, 71, 119, 119, 65, 157, 113, 93, 91…</span></span>
<span><span class="co">#&gt; $ f2           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 11, 117, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ f3           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ f4           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …</span></span>
<span><span class="co">#&gt; $ fc           <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="prepare-and-wrangle-data">1. Prepare and wrangle data<a class="anchor" aria-label="anchor" href="#prepare-and-wrangle-data"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># delete several columns</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">tornados</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"om"</span>,<span class="st">"yr"</span>,<span class="st">"mo"</span>,<span class="st">"date"</span>,<span class="st">"st"</span>,<span class="st">"fat"</span>,<span class="st">"mag"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tornadoes-through-the-years">2. Tornadoes through the years<a class="anchor" aria-label="anchor" href="#tornadoes-through-the-years"></a>
</h3>
<p>Before we start in are main dive, lets look to see how many tornadoes
were there from the time period 1950 to 2021.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Count the number of tornadoes</span></span>
<span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;       n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="text-decoration: underline;">68</span>693</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarise average tornadoes by year</span></span>
<span><span class="va">yearly_tornado</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">yr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add custom font</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"showtext"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"showtext"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext" class="external-link">showtext</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: sysfonts</span></span>
<span><span class="co">#&gt; Loading required package: showtextdb</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_add_google.html" class="external-link">font_add_google</a></span><span class="op">(</span><span class="st">"Ubuntu"</span><span class="op">)</span></span>
<span><span class="va">font_labels</span> <span class="op">&lt;-</span> <span class="st">"Ubuntu"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/showtext/man/showtext_auto.html" class="external-link">showtext_auto</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot data</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">yearly_tornado</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">yr</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#98103E"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tornado through the Years"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"The number of tornadoes has risen over the past seventy years"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Period 1950 - 2021 | Data: NOAA"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">""</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Number of tornadoes"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">font_labels</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>        plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_analysis_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>We can see that there is a gradually increasing trend of number of
tornadoes as years increase. Is this trend similar in the top 4 cities
having most tornadoes?</p>
</div>
<div class="section level3">
<h3 id="where-do-tornadoes-occur">3. Where do Tornadoes Occur?<a class="anchor" aria-label="anchor" href="#where-do-tornadoes-occur"></a>
</h3>
<p>Does tornadoes more likely to occur at some states?</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarise number of tornadoes by state</span></span>
<span><span class="va">tornadoes_st</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">st</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tornadoes_st</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 53 × 2</span></span></span>
<span><span class="co">#&gt;    st    value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> TX     <span style="text-decoration: underline;">9</span>265</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> KS     <span style="text-decoration: underline;">4</span>429</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> OK     <span style="text-decoration: underline;">4</span>144</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> FL     <span style="text-decoration: underline;">3</span>566</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> NE     <span style="text-decoration: underline;">2</span>993</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> IA     <span style="text-decoration: underline;">2</span>815</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> IL     <span style="text-decoration: underline;">2</span>716</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> MS     <span style="text-decoration: underline;">2</span>594</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> AL     <span style="text-decoration: underline;">2</span>456</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> MO     <span style="text-decoration: underline;">2</span>441</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 43 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yearly_tornado_top</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">yr</span>, <span class="va">st</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">st</span> <span class="op">==</span> <span class="st">"TX"</span> <span class="op">|</span> <span class="va">st</span> <span class="op">==</span> <span class="st">"KS"</span> <span class="op">|</span> <span class="va">st</span> <span class="op">==</span> <span class="st">"OK"</span> <span class="op">|</span> <span class="va">st</span> <span class="op">==</span> <span class="st">"FL"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot data</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">yearly_tornado_top</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">yr</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#98103E"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">st</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tornado of top cities through the Years"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Pattern of the top 4 states are different"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Period 1950 - 2021 | Data: NOAA"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">""</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Number of tornadoes"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">font_labels</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>        plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_analysis_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Texas by a clear margin saw the most tornadoes in this timeframe.
Kansas, Oklahoma, and Florida round out the top four. This package also
provide a function to retrieve the unique FIPS (Federal Information
Processing Standards) code for a state or county. Let’s try it with the
top 4 states.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"usmap"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"usmap"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usmap.dev" class="external-link">usmap</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/fips.html">fips</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tx"</span>, <span class="st">"KS"</span>, <span class="st">"OK"</span>, <span class="st">"FL"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "48" "20" "40" "12"</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add color levels to data for plot</span></span>
<span><span class="va">tornadoes_st</span> <span class="op">&lt;-</span> <span class="va">tornadoes_st</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">value</span> <span class="op">&lt;</span> <span class="fl">500</span> <span class="op">~</span> <span class="st">"Less than 500"</span>,</span>
<span>                           <span class="va">value</span> <span class="op">&lt;=</span> <span class="fl">1000</span> <span class="op">~</span> <span class="st">"501 - 1,000"</span>,</span>
<span>                           <span class="va">value</span> <span class="op">&lt;=</span> <span class="fl">2000</span> <span class="op">~</span> <span class="st">"1,001 - 2,000"</span>,</span>
<span>                           <span class="va">value</span> <span class="op">&lt;=</span> <span class="fl">4000</span> <span class="op">~</span> <span class="st">"2,001 - 4,000"</span>,</span>
<span>                           <span class="va">value</span> <span class="op">&gt;</span> <span class="fl">4000</span> <span class="op">~</span> <span class="st">"More than 4,000"</span>,</span>
<span>                           <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"No Tornadoes"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Arrange color levels</span></span>
<span><span class="va">tornadoes_st</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html" class="external-link">fct_relevel</a></span><span class="op">(</span><span class="va">tornadoes_st</span><span class="op">$</span><span class="va">color</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"More than 4,000"</span>,</span>
<span>                                                        <span class="st">"2,001 - 4,000"</span>,</span>
<span>                                                        <span class="st">"1,001 - 2,000"</span>,</span>
<span>                                                        <span class="st">"501 - 1,000"</span>,</span>
<span>                                                        <span class="st">"Less than 500"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Change column name to fit the usmap setting</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tornadoes_st</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">&lt;-</span><span class="st">"state"</span></span>
<span></span>
<span><span class="co"># Plot data</span></span>
<span><span class="fu"><a href="../reference/plot_usmap.html">plot_usmap</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tornadoes_st</span>, values <span class="op">=</span> <span class="st">"color"</span>, labels <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"Less than 500"</span> <span class="op">=</span> <span class="st">"#ffdfa4"</span>,</span>
<span>                                <span class="st">"501 - 1,000"</span> <span class="op">=</span> <span class="st">"#FFC457"</span>,</span>
<span>                                <span class="st">"1,001 - 2,000"</span><span class="op">=</span> <span class="st">"#E4683F"</span>,</span>
<span>                                <span class="st">"2,001 - 4,000"</span><span class="op">=</span> <span class="st">"#C03434"</span>,</span>
<span>                                <span class="st">"More than 4,000"</span> <span class="op">=</span> <span class="st">"#98103E"</span>,</span>
<span>                                <span class="st">"No Tornadoes"</span> <span class="op">=</span> <span class="st">"grey70"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of Tornadoes by State"</span>,</span>
<span>      subtitle <span class="op">=</span> <span class="st">"Period 1950 - 2021 | Data: NOAA"</span>,</span>
<span>      fill <span class="op">=</span> <span class="st">"color"</span>,</span>
<span>      x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">20</span>, t<span class="op">=</span><span class="fl">15</span><span class="op">)</span>, </span>
<span>                                family <span class="op">=</span> <span class="va">font_labels</span>, color <span class="op">=</span> <span class="st">"#22222b"</span>,</span>
<span>                                face <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">25</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">font_labels</span>,</span>
<span>                                    color <span class="op">=</span> <span class="st">"#22222b"</span>, size <span class="op">=</span> <span class="fl">15</span>, </span>
<span>                                    hjust <span class="op">=</span> <span class="fl">0.5</span>, vjust <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>        legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        legend.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">font_labels</span>, size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span>, </span>
<span>        axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.title.x<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span></span>
<span>    label.position <span class="op">=</span> <span class="st">"top"</span>, family <span class="op">=</span> <span class="va">font_labels</span>, color <span class="op">=</span> <span class="st">"#808080"</span>, nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    keywidth <span class="op">=</span> <span class="fl">2</span>, keyheight <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_analysis_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Looking at the visualization:</p>
<ul>
<li>The Midwest and Southeast regions have seen a high amount tornadoes
touch down.</li>
<li>While the Northeast and West regions saw low levels of
tornadoes.</li>
</ul>
</div>
<div class="section level3">
<h3 id="tornadoes-by-month">4. Tornadoes by Month<a class="anchor" aria-label="anchor" href="#tornadoes-by-month"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarise number or tornadoes by month</span></span>
<span><span class="va">month</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">mo</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add months</span></span>
<span><span class="va">mymonths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Jan"</span>,<span class="st">"Feb"</span>,<span class="st">"Mar"</span>,</span>
<span>              <span class="st">"Apr"</span>,<span class="st">"May"</span>,<span class="st">"Jun"</span>,</span>
<span>              <span class="st">"Jul"</span>,<span class="st">"Aug"</span>,<span class="st">"Sep"</span>,</span>
<span>              <span class="st">"Oct"</span>,<span class="st">"Nov"</span>,<span class="st">"Dec"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Order months</span></span>
<span><span class="va">month</span><span class="op">$</span><span class="va">abv</span> <span class="op">&lt;-</span> <span class="va">mymonths</span><span class="op">[</span> <span class="va">month</span><span class="op">$</span><span class="va">mo</span> <span class="op">]</span></span>
<span></span>
<span><span class="co"># Plot data</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">month</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">abv</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#98103E"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="va">month</span><span class="op">$</span><span class="va">abv</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of Tornadoes by Month"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"May saw almost 15,000 tornadoes, by far the most in any month"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Period 1950 - 2021 | Data: NOAA"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Month"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Number of Tornadoes"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">font_labels</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>        plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        panel.grid.minor.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_analysis_files/figure-html/unnamed-chunk-9-1.png" width="700">
### 5. Tornado fatality</p>
<p>How do different level of tornado affect the fatality?</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarise average fatalities by type</span></span>
<span><span class="va">level_fat</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">mag</span> <span class="op">==</span> <span class="op">-</span><span class="fl">9</span><span class="op">)</span></span>
<span><span class="co"># make EF scale as factors</span></span>
<span><span class="va">level_fat</span><span class="op">$</span><span class="va">mag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">level_fat</span><span class="op">$</span><span class="va">mag</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span>,<span class="st">"1"</span>,<span class="st">"2"</span>,<span class="st">"3"</span>,<span class="st">"4"</span>,<span class="st">"5"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">level_fat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">mag</span>, <span class="va">fat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tornado Fatalities by EF Rating"</span>,</span>
<span>      subtitle <span class="op">=</span> <span class="st">"Higher the rating, higher the fatality and larger the variance"</span>,</span>
<span>      caption <span class="op">=</span> <span class="st">"Period 1950 - 2021 | Data: NOAA"</span>,</span>
<span>      x <span class="op">=</span> <span class="st">"EF Level"</span>, y <span class="op">=</span> <span class="st">"Fatality"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="va">font_labels</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span>,</span>
<span>        plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        panel.grid.major.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_analysis_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="average-number-of-tornado-fatalities-by-state">6. Average number of Tornado Fatalities by State<a class="anchor" aria-label="anchor" href="#average-number-of-tornado-fatalities-by-state"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"purrr"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"purrr"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="va">fat</span> <span class="op">&lt;-</span> <span class="va">level_fat</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"st"</span>,<span class="st">"yr"</span>,<span class="st">"fat"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">wide_fat</span> <span class="op">&lt;-</span> <span class="va">fat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">st</span>,<span class="va">yr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total_fat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">fat</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'st'. You can override using the `.groups`</span></span>
<span><span class="co">#&gt; argument.</span></span>
<span></span>
<span><span class="co"># calculate the average number of tornado fatalities over years by state</span></span>
<span><span class="va">split_fat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">wide_fat</span>, <span class="va">wide_fat</span><span class="op">$</span><span class="va">st</span><span class="op">)</span></span>
<span><span class="va">mean_fat</span> <span class="op">&lt;-</span> <span class="va">split_fat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span>.f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">total_fat</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span>decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">mean_fat</span></span>
<span><span class="co">#&gt;         AL         TX         MS         OK         TN         AR         MO </span></span>
<span><span class="co">#&gt; 9.15068493 8.13698630 6.52054795 6.01369863 5.65277778 5.47945205 4.79452055 </span></span>
<span><span class="co">#&gt;         IN         GA         OH         IL         MI         LA         KY </span></span>
<span><span class="co">#&gt; 3.67123288 3.16438356 3.13888889 3.08219178 3.07042254 3.06849315 2.69444444 </span></span>
<span><span class="co">#&gt;         KS         FL         MA         NC         WI         MN         IA </span></span>
<span><span class="co">#&gt; 2.65753425 2.27397260 1.87500000 1.67123288 1.38356164 1.34246575 1.20547945 </span></span>
<span><span class="co">#&gt;         SC         NE         PA         VA         NY         ND         SD </span></span>
<span><span class="co">#&gt; 0.97260274 0.82191781 0.68055556 0.52777778 0.44285714 0.38356164 0.23287671 </span></span>
<span><span class="co">#&gt;         MD         OR         CT         CO         MT         DE         WY </span></span>
<span><span class="co">#&gt; 0.14754098 0.12500000 0.08163265 0.06849315 0.05970149 0.05882353 0.05714286 </span></span>
<span><span class="co">#&gt;         NM         AZ         WV         NH         UT         NJ         ME </span></span>
<span><span class="co">#&gt; 0.05633803 0.04545455 0.03448276 0.02127660 0.02083333 0.01923077 0.01886792 </span></span>
<span><span class="co">#&gt;         AK         CA         DC         HI         ID         NV         PR </span></span>
<span><span class="co">#&gt; 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 </span></span>
<span><span class="co">#&gt;         RI         VI         VT         WA </span></span>
<span><span class="co">#&gt; 0.00000000 0.00000000 0.00000000 0.00000000</span></span>
<span></span>
<span><span class="co"># calculate the total number of tornado fatalities over years by state</span></span>
<span><span class="va">total_fat</span> <span class="op">&lt;-</span> <span class="va">split_fat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_int</a></span><span class="op">(</span>.f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">total_fat</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span>decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">total_fat</span></span>
<span><span class="co">#&gt;  AL  TX  MS  OK  TN  AR  MO  IN  GA  OH  IL  LA  MI  KS  KY  FL  NC  MA  WI  MN </span></span>
<span><span class="co">#&gt; 668 594 476 439 407 400 350 268 231 226 225 224 218 194 194 166 122 105 101  98 </span></span>
<span><span class="co">#&gt;  IA  SC  NE  PA  VA  NY  ND  SD  MD  OR  CO  CT  MT  NM  WY  AZ  DE  WV  ME  NH </span></span>
<span><span class="co">#&gt;  88  71  60  49  38  31  28  17   9   6   5   4   4   4   4   3   2   2   1   1 </span></span>
<span><span class="co">#&gt;  NJ  UT  AK  CA  DC  HI  ID  NV  PR  RI  VI  VT  WA </span></span>
<span><span class="co">#&gt;   1   1   0   0   0   0   0   0   0   0   0   0   0</span></span></code></pre></div>
<p>Alabama had the most fatalities, followed by Texas, Mississippi, and
Oklahoma.</p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>From the analysis of the tornado dataset, we found there are 67,937
tornadoes touch down in the United States from 1950 through 2021. The
Midwest and Southeast are impacted the most by tornadoes. In addition,
there was 6,118 fatalities caused by tornadoes, and EF5 averaged the
hisghest amount of fatalities by EF rating.</p>
</div>
<div class="section level2">
<h2 id="function-summary">Function summary<a class="anchor" aria-label="anchor" href="#function-summary"></a>
</h2>
<table class="table">
<thead><tr class="header">
<th>Package name</th>
<th>Functions used</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>dplyr</code></td>
<td>
<code>count</code> <code>group_by</code> <code>mutate</code>
<code>arrange</code> <code>summarise</code>
</td>
</tr>
<tr class="even">
<td><code>forcats</code></td>
<td><code>fct_relevel</code></td>
</tr>
<tr class="odd">
<td><code>ggplot2</code></td>
<td>
<code>geom_boxplot</code> <code>geom_line</code>
<code>geom_col</code> <code>facet_wrap</code>
</td>
</tr>
<tr class="even">
<td><code>purrr</code></td>
<td>
<code>map_int</code> <code>map_dbl</code>
</td>
</tr>
<tr class="odd">
<td><code>usmap</code></td>
<td>
<code>fips</code> <code>plot_usmap</code>
</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Paolo Di Lorenzo.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. By Yingying Yu.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
